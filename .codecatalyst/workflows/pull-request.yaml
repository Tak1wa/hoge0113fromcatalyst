Name: pull-request
SchemaVersion: "1.0"
Triggers:
  - Type: PULLREQUEST
    Events:
      - OPEN
      - REVISION
    Branches: []
Actions:
  Build_And_Test:
    Identifier: aws/build@v1
    Inputs:
      Sources:
        - WorkflowSource
    Outputs:
      AutoDiscoverReports:
        IncludePaths:
          - "**/TestResults/*"
        ReportNamePrefix: AutoDiscovered
        Enabled: true
    Configuration:
      Steps:
        - Run: dotnet build ServerlessApp.sln -c Release
        - Run: dotnet test ServerlessApp.sln -c Release --no-build --logger "trx"
      Container:
        Registry: CODECATALYST
        Image: CodeCatalystLinux_x86_64:2024_03
